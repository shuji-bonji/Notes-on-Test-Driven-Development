---
description: TDDにおけるテストリストの作成方法、管理のベストプラクティス、優先順位付けの手法を解説。Kent Beckのアプローチに基づいた効果的な進め方を紹介します。
---

# テストリストの作成と管理
テスト駆動開発(TDD)においては、テストリストの作成と管理が重要なプラクティスとなります。
テストリストは、実装すべき機能やシナリオを整理し、TDDのサイクルを効果的に進めるための道しるべとなります。


## テストリストとは何か
テストリストとは、これから実装する機能や仕様をテストケースの形で書き出した一覧です。  
実装前にこのリストを作成することで、何を実装すべきか、またその完了基準が明確になります。  
また、進行状況の可視化や、抜け漏れの防止にも役立ちます。

これはTDDの最初のステップであり、実装する前に「何をテストすべきか」を明確にするためのツールです。

テストリストには、以下のような項目を含めます。
- 基本的な機能のテスト
- 境界条件のテスト
- エラーケースのテスト
- エッジケースのテスト

Kent Beckは著書「テスト駆動開発」の中で、テストリストを「やることリスト」として扱い、タスクの可視化と管理に役立てることを提案しています。


## テストリストの作り方
効果的なテストリストを作成するには、以下のステップを踏むと良いでしょう。

|順番|ステップ|内容|
|---|---|---|
|1|`要件の分析`|実装すべき機能や仕様を理解し、それに基づいて必要なテストを洗い出します。|
|2|`ユースケースの検討`|ソフトウェアがどのように使われるかを考え、ユーザーの視点からのテストシナリオを考えます。|
|3|`粒度の決定`|テストケースの粒度を適切に設定します。大きすぎるとテストの目的が不明確になり、小さすぎると管理が煩雑になります。|
|4.|`優先順位の設定`|重要度や依存関係に基づいて、テストの優先順位を設定します。|


良いテストリストは、仕様や要件をよく理解した上で、小さく・具体的な単位で記述されていることが重要です。  
以下のステップで作成してみましょう。

### テストリストの例: 計算アプリ

```ts
/`
 * 【計算機アプリケーションのテストリスト】
 * 
 * - 2つの正の整数の加算ができること
 * - 負の数の加算ができること
 * - 小数の加算ができること
 * - 2つの正の整数の減算ができること
 * - 負の数の減算ができること
 * - 小数の減算ができること
 * - 2つの正の整数の乗算ができること
 * - 0との乗算が0を返すこと
 * - 2つの正の整数の除算ができること
 * - 0による除算でエラーを返すこと
 * - 計算履歴が保存されること
 * - 計算履歴をクリアできること
 */
```

### テストリストの例: ログイン機能
```ts
// [x] 正常にログインできる
// [ ] パスワードが間違っている場合、ログインできない
// [ ] トークンが返されることを確認する
```


## テストリストの管理方法
テストリストは静的なものではなく、常に進化させていくべき動的なツールです。  
開発の進行に合わせて適切に管理する必要があります。

|項目|内容|
|---|---|
|`進捗の追跡`|完了したテストにはチェックマークをつけるなど、進捗を可視化します。|
|`リストの更新`|実装中など開発の過程で新たに必要と思われるテストを追加したり、不要になったテストを削除したりします。|
|`リファクタリングによる影響の評価`|コードのリファクタリングを行った際に、既存のテストに影響がないか確認します。|
|`テスト間の依存関係の管理`|テスト間に依存関係がある場合は、それを明示してテストの実行順序に注意します。|
|`他者との共有`|チームで共有することで、テスト観点の抜け漏れを防ぎます。|


小さなテスト単位でリストアップし、「今はここに取り組んでいる」というフォーカスを明確に持つことがTDDの流れを加速させます。


### 効果的な管理ツール
テストリストは、以下のようなツールで管理することができます。

- 単純なテキストファイル
- Github リポジトリの Discussions
- タスク管理ツール（Trello, Jiraなど）
- TDDに特化したツール（TestRail, Fitnesse など）
- IDEの統合機能（TODO コメントなど）
- スプレッドシート


## テストリストの優先順位付け
すべてのテストは同じ重要度ではありません。  
テストすべき項目が多くなってきたら、優先順位をつけることで開発効率を高めることができます。

|項目|内容|
|---|---|
|`重要度による優先順位`|ビジネス要件に直結する重要な機能から優先的にテストします。|
|`依存関係による優先順位`|他の機能の前提となる基本機能から順にテストします。|
|`複雑さによる優先順位`|シンプルな機能から複雑な機能へと段階的にテストを進めます。|
|`リスクによる優先順位`|技術的なリスクが高い部分を優先的にテストすることで、早期にリスクを軽減します。|
|`ケースの種類による優先順位`|正常系から異常系へ段階的に進めることで、仕様理解とテスト戦略を整理しやすくなります。|

### INVEST基準
テストケースの質を評価する際に、INVEST基準を活用することも有効です。

- **I**ndependent（独立している）: 他のテストに依存せず、単独で実行できる
- **N**egotiable（交渉可能）: 詳細は開発プロセスの中で調整できる
- **V**aluable（価値がある）: ビジネス価値に直結している
- **E**stimable（見積もり可能）: 実装の規模を見積もることができる
- **S**mall（小さい）: 適切なサイズに分割されている
- **T**estable（テスト可能）: 検証可能な条件がある

> INVEST基準とは、ユーザーストーリーの品質を評価するための基準で、ユーザーストーリーを作成する際に意識することで、より効果的なストーリーを作成することができます。﻿


## テストリストを活用したTDDの実践
テストリストは単なるチェックリストではなく、TDDのサイクルを効果的に回すためのナビゲーションツールです。

### テストリストの更新
![テストリストの更新](/images/TDD-flow-change-test-list.svg)

### TDDの基本サイクルでの、テストリスト活用
|順番|ステップ|内容|
|---|---|---|
|1|`テストリスト`から次のテストを選択|優先順位に基づいて次に実装すべきテストを選びます|
|2|Red🔴|選んだテストを実装し、失敗することを確認します|
|3|Green🟢|テストが通るように最小限のコードを実装します|
|4|Refactor🔵|コードを改善しつつ、テストが通り続けることを確認します|
|5|`テストリスト`の更新|完了したテストにチェックをつけ、必要に応じて新しいテストを追加します|
|6|次のテストへ|サイクルを繰り返します|

## 実践的なヒント
テストリストを効果的に活用するための実践的なヒントをいくつか紹介します。

|ヒント|内容|
|---|---|
|`共有と可視化`|チーム開発の場合、テストリストを共有し、進捗を可視化することで、チームメンバー間でのコミュニケーションが円滑になります。|
|`定期的な見直し`|テストリストは定期的に見直し、不要なテストの削除や優先順位の調整を行います。|
|`粒度の調整`|テストリストの粒度が大きすぎる場合は、より小さなテストに分割して管理しやすくします。|
|`コンテキストの記録`|テストが必要となった背景や理由を記録しておくと、後から見直した際に役立ちます。|
|`完了の定義`|テストが「完了」と見なせる条件を明確にしておきます。|

## まとめ

テストリストはTDDにおける重要なプラクティスであり、効果的に活用することで、開発プロセスが整理され、品質の高いソフトウェアを効率よく開発することができます。
テストリストを作成し、適切に管理することで、TDDの「赤・緑・リファクタリング」のサイクルをスムーズに進めることができるでしょう。

---

参考文献：
- Kent Beck著「テスト駆動開発」
- Steve Freeman、Nat Pryce著「テスト駆動開発の道案内」
- James W. Grenning著「組込みソフトウェア開発のためのテスト駆動開発」